# EXPORTS & environment stuff

# Prefer /usr/local/bin over /usr/bin
export PATH="/usr/local/bin:$PATH:$HOME/bin"
export PATH="/usr/local/sbin:$PATH"

# .Net stuff
if [[ -e ~/.dotnet ]]; then
    export DOTNET_ROOT=$HOME/.dotnet
    export PATH=$PATH:$DOTNET_ROOT:$DOTNET_ROOT/tools
fi

# HDF5 utils.
if [[ -e /usr/local/opt/hdf5@1.8 ]]; then
    export PATH="/usr/local/opt/hdf5@1.8/bin:$PATH"
fi

# Go
export PATH="$PATH:/usr/local/go/bin"

# environment variables for editors
export SVN_EDITOR=/usr/bin/vim
export VISUAL=/usr/bin/vim
export EDITOR=/usr/bin/gvim


# Dropbox path
if [ -e ~/mnt/d/Dropbox ]; then
    export DROPBOXPATH=/mnt/d/Dropbox
else
    export DROPBOXPATH=$HOME/Dropbox
fi

# Load the secret env vars.
if [[ -f "$DROPBOXPATH/dotfiles/secrets.sh" ]]; then
    source "$DROPBOXPATH/dotfiles/secrets.sh"
else
    echo "Warning: secrets.sh not found at $DROPBOXPATH/dotfiles/secrets.sh" >&2
    echo "         Some environment variables (e.g., ADO_TOKEN, GitHub creds) won't be loaded" >&2
fi

if command -v thefuck &>/dev/null; then
    eval "$(thefuck --alias)"
fi

# Rust!
if [[ -e ~/.cargo ]]; then
    export PATH="$HOME/.cargo/bin:$PATH"
fi

# For GPG signing.
if [[ -t 0 ]]; then
    export GPG_TTY=$(tty)
else
    export GPG_TTY="${GPG_TTY:-/dev/null}"
fi
